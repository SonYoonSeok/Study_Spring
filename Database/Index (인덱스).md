# Index (인덱스)

> 인덱스란?
>
> 검색을 위해 임의의 규칙대로 부여된, 임의의 대상을 가리키는 무언가 

`Index`는 DB의 테이블에 데이터가 많을 때, 검색 속도를 **향상**시캬주기 위해 사용된다.

책의 `색인`이나 `목차`로 비유되는 개념이다.

Where절을 사용하여 특정 조건에 맞는 데이터를 찾을 때 테이블에 있는 모든 데이터를 처음부터 끝까지 비교하며 비교해야 합니다. 이를 **Full Table Scan**이라고 합니다. 이를 해결하기 위해 DB에서는 **Index**라는 개념이 사용된다.

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcQi8RP%2Fbtq8BkRrRfb%2Fa5C0jH5pfSA2KKz7C9fB7k%2Fimg.png" height=70%, width=70%>

책에서 카테고리를 목차에서 찾고 목차에 있는 페이지 번호를 보고 찾아가듯 인덱스도 원하는 데이터를 먼저 찾고 그 **데이터가 저장되어 있는 물리적 주소**로 찾아갑니다.

<hr>

### 인덱스를 사용하는 이유

인덱스의 가장 큰 특징은 데이터들이 정렬되어 있다는 점입니다.

이것으로 인해 조건 검색이라는 영역에서 굉장한 장점이 됩니다.

#### Where 절에서의 효율성

정렬되어 있는 인덱스 테이블에서 Where에 맞는 데이터를 빠르게 찾아낼 수 있다.


#### Order by 절에서의 효율성

인덱스 테이블을 사용하면 Order by에서의 **Sort 과정을 생략**할 수 있습니다. 정렬과 동시에 1차적으로 메모리에서 정렬이 이루어지고 메모리보다 큰 작업이 필요하다면 디스크 I/O도 추가적으로 발생하기 때문입니다.
인덱스를 사용하면 이러한 **자원 소모 없이** 이미 정렬된 테이블에서 데이터를 가져오기만 하면 됩니다.

<hr>

### Index의 생성

**Index**는 컬럼 단위로 생성됩니다. 하나 또는 여러 컬럼에 하나의 **Index**를 생성할 수 있습니다.

**테이블 생성 시 하나의 컬럼에 PK를 지정하면 자동으로 `Clustered Index`가 생성**됩니다.

* 인덱스를 가장 효율적으로 활용하기 위해선 데이터의 분포도는 **최대한**으로 그리고 조건절에 **자주 사용**되는 컬럼을 인덱스로 생성하는 것이 좋다.
* 가장 최선은 PK를 인덱스로 거는 것이다. **중복된 값이 없는 인덱스 테이블**이 최적의 효율을 발생시키기 때문이다.

**`Unique` 제약 조건이 있는 테이블**을 만들면 옵티마이저에서 자동으로 `Non-Clustered Index`를 생성합니다.

제약 조건 없이 테이블 생성시 인덱스를 만들 수 없으며, 인덱스가 자동으로 생성되기 위한 컬럼의 제약 조건은 `PK`와 `Unique`뿐입니다.