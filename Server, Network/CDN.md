# CDN 



## CDN이란?

CDN이란, **Content delivery network**의 줄임말로 웹페이지나 이미지, 동영상 등의 콘텐츠를 서버에서 사용자에게로 전송하는 것을 뜻한다.

<img src="https://www.akamai.com/content/dam/site/ko/images/article/how-does-a-cdn-work.png" height=60% width=60%>

콘텐츠들은 **인터넷망**을 통해 **서버와 클라이언트들이 이미 연결** 돼 있어 CDN이 필요 없다고 생각할 수도 있지만 CDN을 사용하는 데에는 다양한 이유가 있다.

### CDN을 사용하는 이유

* 서버가 한국에 있는 사이트에 한국 뿐 아니라 미국, 유럽, 중국 등 **전세계**에서 접속한다면, 한국에서는 빠르겠지만 멀리서 접속하는 사람들은 속도가 상당히 느리다
* 여러 곳에서 들어오는 요청들을 서버 혼자서 감당하기는 버겁다. 따라서, 이를 **분산**시키기 위해 사용하는 것이 **CDN**이다.



## CDN의 구조

<img src="https://i.ibb.co/bQWrLQJ/sdd.jpg">

* 한국에서 사이트를 운영하는 사람이 전 세계 곳곳에 서버를 두고 있는 CDN 업체를 이용한다.
* 미국에 사는 한 유저가 한국에 있는 사이트에 접속한다.
* 미국에 사는 유저가 보내는 요청은 CDN 서버에 보내지게 된다.
* 유저는 한국에 있는 서버와 소통하는 것이 아니라, 각종 이미지, 정적 파일들이 **캐싱**되어 있는 CDN 서버와 소통한다.



### CDN에서의 캐싱

CDN서버는 사이트의 컨텐츠들을 캐싱을 해와야 하는데 이는 정적 캐싱, 동적 캐싱으로 나뉜다.

* 정적 캐싱 - 캐싱할 것들을 미리 CDN 서버에 보내 놓는 것
* 동적 캐싱 - 사용자가 요청을 보낼 때, 보낼 컨텐츠가 CDN 서버에 존재하면 cache hit, 존재하지 않으면 cache miss가 발생하는데 이때 서버에 요청하여 컨텐츠를 받아오는 것.
  * TTL이 지나면 캐시 서버에서 삭제될 수 있음



### CDN의 장단점

**장점**

* 글로벌한 범위 안에서 장거리 웹 사이트 로딩 속도 개선 및 안정적인 컨텐츠 제공이 가능
* 서비스 제공 업체에 돈을 지불하는 대신, 호스팅에 많은 비용을 지불 할 필요가 없음

**단점**

* 특정 국가나 지역만을 타깃으로 하는 서비스는 CDN이 필요 없다. 이 경우 CDN을 사용하면 오히려 불필요한 연결 지점이 늘어서 성능이 저하 된다.
* CDN을 위한 캐시 서버들이 많이 없거나 성능이 안정적이지 않는다면 SPOF(단일 장애점) 문제가 발생 할 수 있다.