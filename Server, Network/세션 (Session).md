# 세션



## 세션(Session) 이란

> 사용자가 브라우저를 통해 웹서버에 접속한 시점부터 브라우저를 종료하여 연결을 끝내는 시점까지, 같은 사용자로부터 오는 요청을 하나의 상태로 보고, 그 상태를 유지하는 것
>
> 즉, 방문자가 웹 서버에 접속한 상태를 세션이라고 한다.



### 세션의 특징

* 웹 서버에 웹 컨테이너의 상태를 유지하기 위한 정보를 저장
  * 웹 서버에 저장되는 쿠키 (**세션쿠키**)
* 저장데이터에 제한 X.
* 각 클라이언트에 고유세션ID를 부여.
* 세션ID로 클라이언트를 구분하여 각 클라이언트 요구에 맞는 서비스를 제공.



## 세션의 장단점

### 장점

* **보안 유지** : 최초 접속 때를 제외하고 세션ID만 사용
* **큰 용량** : 저장 개수나 용량 제한이 없음
* **독립성** : 서버에 저장되므로 클라이언트의 브라우저에 의존하지 않아도 됨
* **저장** : 데이터를 해쉬 테이블에 저장하므로 한 번에 많은 정보를 하나의 세션에 저장 가능
* **네트워크** : 세션ID만 보내므로, 세션의 크기가 커도 네트워크 부하가 거의 없음

### 단점

* **서버 부하** : 서버에 데이터를 저장하므로 세션 양이 많아질수록 서버 부하가 커짐



## 세션 동작순서

![쿠키와 세션 개념](https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F241EE049582DA37607)

1. 클라이언트에 요청
2. 서버는 Request-Header필드인 cookie를 확인해, 클라이언트가 세션ID를 보냈는지 확인
3. 세션ID가 존재하지 않는다면, 서버는 세션ID를 생성해 클라이언트에게 전송
4. 서버에서 클라이언트로 준 세션ID를 쿠키를 사용해 서버에 저장
5. 재접속 시, 쿠키를 이용하여 세션ID를 서버에 전달



### 쿠키와 세션의 차이

| 구분         | 쿠키                                       | 세션                                            |
| ------------ | ------------------------------------------ | ----------------------------------------------- |
| 저장위치     | 클라이언트(로컬)                           | 서버                                            |
| 라이프사이클 | 쿠키 저장시 설정                           | 브라우저 종료시 삭제 (별도로 지정 가능)         |
| 보안         | 로컬에 저장되어 탈취, 변조 위험 존재, 취약 | 서버에 저장되므로 안전                          |
| 속도         | 빠름                                       | 서버에서 데이터를 재참조해야 하므로 비교적 느림 |

